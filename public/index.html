<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<title>Battle Tanks</title>
		<link href='http://fonts.googleapis.com/css?family=Play:700' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="/css/style.css">
		<script type="text/javascript" src="//code.jquery.com/jquery-2.1.1.min.js"></script>
		<script type="text/javascript" src="/socket.io/socket.io.js"></script>
		<script type="text/javascript" src="js/socket.js"></script>
		<script type="text/javascript" src="js/canvas_tank.js"></script>
		<script type="text/javascript" src="js/bullet.js"></script>
		<script type="text/javascript" src="js/tank.js"></script>
		<script type="text/javascript" src="js/game.js"></script>
		<script type="text/javascript" src="js/chatroom.js"></script>
		<script>

			// socket = io.connect();

			socket.emit('get users', "getting users");

		  $(function() {
				// Make lobby appear
				$('#splashbutton').on('click', connectToLobby);

				$('body').on('click', '#p1', function() {
					$('#p1').remove();
					$('#p2').remove();
					$('canvas').show();
					startGame('p', 'red', 'q', 'blue');
				});
				$('body').on('click', '#p2', function() {
					$('#p1').remove();
					$('#p2').remove();
					$('canvas').show();
					startGame('q', 'blue','p', 'red');
				});
			});

			// Establishes socket connection and loads chat lobby
			function connectToLobby() {
				$('#splashpage').hide();
				// AJAX request for socket.js to open a socket connection
				// $.get('/socket').done(function(data) {
				var scriptElement = document.createElement('script');
				scriptElement.src = '/js/socket.js';
				$('#splashpage').hide();
				$('#lobby').show();
				$('#loginpage').show();
			}
		</script>
	</head>

	<body>
		<canvas id='canvas' height=600 width=1000></canvas>
		<div class='player-button' id='p1'>Player 1</div>
		<div class='player-button' id='p2'>Player 2</div>
		<div id="splashpage">
			<h1>Battle Tanks</h1>
			<button id="splashbutton">Go to battle</button>
		</div>
		<div id="lobby">
			<div class="chatcontainer">
				<div class="userscontainer">
					<h1 class="users-title">Users Connected</h1>
					<div class="current-users">
					</div>
				</div>
				<div class="chatmessagescontainer">
				</div>
			</div>
			<div class="textinputcontainer">
				<input type="text" id="messageinput" placeholder="Type your message here">
				<input class="sendbutton" type="button" value="Send"/>
			</div>
		</div>
		<div id="loginpage">
			<div class="loginform">
				<input type="text" type="submit" id="login-input" placeholder="Select your username">
			</div>
		</div>
	</body>
</html>
